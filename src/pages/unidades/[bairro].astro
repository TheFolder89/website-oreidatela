---
import Layout from "../../layouts/Layout.astro";
import Header from "../../components/Header.astro";
import Footer from "../../components/Footer.astro";
import WhatsAppFloatingButton from "../../components/WhatsAppFloatingButton";
import neighborhoods from "../../data/neighborhoods.json";
import {
  MapPin,
  Truck,
  Clock,
  Zap,
  ChevronRight,
  ShieldCheck,
  Smartphone,
} from "lucide-react";

export function getStaticPaths() {
  return neighborhoods.map((bairro) => ({
    params: {
      bairro: bairro.slug,
    },
    props: { bairro },
  }));
}

const { bairro } = Astro.props;

const title = `Conserto de iPhone em ${bairro.name} - Salvador | Delivery Grátis`;
const description = `Assistência técnica Apple em ${bairro.name} (${bairro.zone}). Delivery rápido em ${bairro.deliveryTime}, troca de tela original e bateria com 3 meses de garantia.`;

// GEO-Optimized FAQ Data
const faqData = [
  {
    question: `Quanto tempo demora o delivery para ${bairro.name}?`,
    answer: `Para a região de ${bairro.name} e arredores (${bairro.landmark}), nosso tempo médio de chegada é de ${bairro.deliveryTime} após a solicitação.`,
  },
  {
    question: "O serviço é feito em domicílio ou retiram o aparelho?",
    answer:
      "Trabalhamos com Laboratório Móvel para reparos simples (tela/bateria) ou Coleta Expressa para serviços complexos. Em ambos os casos, a segurança é total.",
  },
  {
    question: "Qual a garantia das peças?",
    answer:
      "Todas as peças substituídas possuem 3 meses de garantia contra defeitos de fabricação. Utilizamos componentes Premium AAA+ ou Originais Recondicionados.",
  },
];

const schema = {
  "@context": "https://schema.org",
  "@type": "Service",
  name: `Assistência Técnica Apple em ${bairro.name}`,
  provider: {
    "@type": "LocalBusiness",
    name: "O Rei da Tela",
  },
  areaServed: {
    "@type": "Place",
    name: bairro.name,
    address: {
      "@type": "PostalAddress",
      addressLocality: "Salvador",
      addressRegion: "BA",
      addressCountry: "BR",
    },
  },
  description: description,
};

const faqSchema = {
  "@context": "https://schema.org",
  "@type": "FAQPage",
  mainEntity: faqData.map((faq) => ({
    "@type": "Question",
    name: faq.question,
    acceptedAnswer: {
      "@type": "Answer",
      text: faq.answer,
    },
  })),
};
---

<Layout title={title} description={description}>
  <Header />

  <main>
    <!-- Geometric Hero -->
    <section class="bg-brand-dark text-white py-32 relative overflow-hidden">
      <!-- Overlay Pattern -->
      <div
        class="absolute inset-0 opacity-[0.05]"
        style="background-image: radial-gradient(#fff 1px, transparent 1px); background-size: 30px 30px;"
      >
      </div>
      <div
        class="absolute inset-x-0 bottom-0 h-1/2 bg-gradient-to-t from-brand-navy/80 to-transparent"
      >
      </div>

      <div
        class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 text-center animate-slide-up"
      >
        <div
          class="inline-flex items-center gap-3 px-6 py-2 bg-brand-gold/10 rounded-full text-[10px] font-black uppercase tracking-[0.4em] mb-10 border border-brand-gold/20 text-brand-gold backdrop-blur-md"
        >
          <MapPin className="w-4 h-4" /> Zona de Atendimento: {bairro.zone}
        </div>
        <h1
          class="text-4xl md:text-7xl font-black mb-10 leading-none tracking-tighter uppercase"
        >
          ASSISTÊNCIA APPLE <br />
          <span class="text-brand-gold">EM {bairro.name}</span>
        </h1>
        <p
          class="text-xl text-white/50 max-w-2xl mx-auto font-light leading-relaxed mb-12"
        >
          A exclusividade que o <strong class="text-white">{bairro.name}</strong
          > merece. Chegamos em <strong>{bairro.deliveryTime}</strong> na região d{
            ["a", "o"].includes(bairro.name.charAt(0).toLowerCase()) ? "" : "e"
          }
          {bairro.landmark}.
        </p>
        <div class="flex justify-center flex-col sm:flex-row gap-6">
          <a
            href="https://wa.me/557194142627"
            class="bg-brand-gold hover:bg-white text-brand-navy px-12 py-6 rounded-2xl font-black text-sm uppercase tracking-widest transition-all shadow-2xl shadow-brand-gold/20 flex items-center justify-center gap-3 active:scale-95"
          >
            <Truck className="w-6 h-6 fill-current" /> AGENDAR COLETA
          </a>
          <a
            href="/#orcamento"
            class="bg-white/5 border border-white/20 text-white px-12 py-6 rounded-2xl font-black text-sm uppercase tracking-widest hover:bg-white/10 transition-all backdrop-blur-md"
          >
            TABELA DE PREÇOS
          </a>
        </div>
      </div>
    </section>

    <!-- Value Props for Location -->
    <section class="py-32 bg-white">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid md:grid-cols-3 gap-12">
          <div
            class="group p-10 bg-gray-50 rounded-[2.5rem] border border-gray-100 hover:bg-brand-navy transition-all duration-500"
          >
            <div
              class="w-16 h-16 bg-brand-navy/5 rounded-2xl flex items-center justify-center mb-8 group-hover:bg-brand-gold"
            >
              <Truck
                className="w-8 h-8 text-brand-navy group-hover:text-brand-navy"
              />
            </div>
            <h3
              class="text-2xl font-black mb-4 tracking-tight group-hover:text-white uppercase transition-colors leading-none"
            >
              Logística Expressa
            </h3>
            <p
              class="text-gray-500 group-hover:text-white/60 font-medium leading-relaxed"
            >
              Nossos motoboys conhecem cada atalho d{
                ["a", "o"].includes(bairro.name.charAt(0).toLowerCase())
                  ? ""
                  : "e"
              }
              {bairro.name} para garantir o tempo recorde de {
                bairro.deliveryTime
              }.
            </p>
          </div>
          <div
            class="group p-10 bg-gray-50 rounded-[2.5rem] border border-gray-100 hover:bg-brand-navy transition-all duration-500"
          >
            <div
              class="w-16 h-16 bg-brand-navy/5 rounded-2xl flex items-center justify-center mb-8 group-hover:bg-brand-gold"
            >
              <ShieldCheck className="w-8 h-8 text-brand-navy" />
            </div>
            <h3
              class="text-2xl font-black mb-4 tracking-tight group-hover:text-white uppercase transition-colors leading-none"
            >
              Garantia Premium
            </h3>
            <p
              class="text-gray-500 group-hover:text-white/60 font-medium leading-relaxed"
            >
              Atendemos toda a zona {bairro.zone} com garantia de 3 meses em tela
              e bateria. Se precisar, voltamos até você.
            </p>
          </div>
          <div
            class="group p-10 bg-gray-50 rounded-[2.5rem] border border-gray-100 hover:bg-brand-navy transition-all duration-500"
          >
            <div
              class="w-16 h-16 bg-brand-navy/5 rounded-2xl flex items-center justify-center mb-8 group-hover:bg-brand-gold"
            >
              <Smartphone className="w-8 h-8 text-brand-navy" />
            </div>
            <h3
              class="text-2xl font-black mb-4 tracking-tight group-hover:text-white uppercase transition-colors leading-none"
            >
              Especialistas Apple
            </h3>
            <p
              class="text-gray-500 group-hover:text-white/60 font-medium leading-relaxed"
            >
              Técnicos certificados para lidar com os modelos mais recentes de
              iPhone e Apple Watch com total segurança.
            </p>
          </div>
        </div>

        <!-- GEO Definition Box -->
        <div
          class="mt-20 bg-brand-gray/10 rounded-3xl p-10 border border-brand-gray/20"
        >
          <h3
            class="text-sm font-black uppercase tracking-widest text-brand-gold mb-4"
          >
            Sobre o Serviço
          </h3>
          <blockquote
            class="text-xl md:text-2xl font-medium text-brand-navy leading-relaxed"
          >
            "A <strong>Coleta Expressa O Rei da Tela</strong> é um serviço premium
            de logística reversa que permite aos moradores de <strong
              >{bairro.name}</strong
            > reparar seus dispositivos Apple sem sair de casa, com tempo médio de
            resposta de <strong>{bairro.deliveryTime}</strong>."
          </blockquote>
        </div>
      </div>
    </section>

    <!-- FAQ Section (GEO Optimized) -->
    <section class="py-20 bg-gray-50">
      <div class="max-w-4xl mx-auto px-4">
        <div class="text-center mb-16">
          <span
            class="text-brand-gold font-black text-[10px] uppercase tracking-[0.4em]"
            >Dúvidas Locais</span
          >
          <h2 class="text-4xl font-black text-brand-navy mt-4 tracking-tighter">
            Perguntas Frequentes em {bairro.name}
          </h2>
        </div>

        <div class="space-y-4">
          {
            faqData.map((faq) => (
              <details class="group bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden open:shadow-md transition-all">
                <summary class="flex justify-between items-center p-6 cursor-pointer list-none">
                  <span class="font-bold text-brand-navy">{faq.question}</span>
                  <span class="transition-transform group-open:rotate-180 text-brand-gold">
                    <ChevronRight />
                  </span>
                </summary>
                <div class="px-6 pb-6 text-gray-500 leading-relaxed">
                  {faq.answer}
                </div>
              </details>
            ))
          }
        </div>
      </div>
    </section>

    <!-- Map Section -->
    <section class="py-32 bg-brand-navy text-white relative overflow-hidden">
      <!-- Background Map Image -->
      <div class="absolute inset-0 opacity-10 pointer-events-none">
        <img
          src="https://images.unsplash.com/photo-1595171731631-41481b9201cb?q=80&w=2670&auto=format&fit=crop"
          class="w-full h-full object-cover grayscale"
        />
      </div>

      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
        <div class="grid lg:grid-cols-2 gap-24 items-center">
          <div>
            <div
              class="text-brand-gold font-black text-[10px] uppercase tracking-[0.4em] mb-6"
            >
              Unidade Central
            </div>
            <h2
              class="text-5xl font-black text-white mb-10 tracking-tighter uppercase leading-none"
            >
              O Hub de <span class="text-brand-gold">Precisão</span>
            </h2>
            <p class="text-white/60 text-xl font-light mb-12 leading-relaxed">
              Nossa unidade no Caminho das Árvores funciona como o centro
              nervoso para todas as coletas de {bairro.name}. Tecnologia de
              ponta com laboratório visível aos clientes.
            </p>
            <ul class="space-y-8 mb-12">
              <li class="flex items-start gap-5">
                <div
                  class="w-12 h-12 bg-white/10 rounded-2xl flex items-center justify-center border border-white/10 shrink-0"
                >
                  <MapPin className="w-6 h-6 text-brand-gold" />
                </div>
                <div>
                  <div
                    class="text-xs font-black uppercase tracking-widest text-white mb-1"
                  >
                    Endereço Principal
                  </div>
                  <span class="text-white/60 font-bold"
                    >Av. Tancredo Neves - Salvador Trade Center, Torre Norte,
                    Sala 1407 - Caminho das Árvores, Salvador - BA, 41820-915</span
                  >
                </div>
              </li>
            </ul>
            <a
              href="https://maps.app.goo.gl/Wsk7mF9jrc2zTRZFA"
              target="_blank"
              class="inline-flex items-center gap-2 group text-white font-black uppercase tracking-widest text-xs border-b-2 border-brand-gold pb-1 hover:text-brand-gold transition-colors"
            >
              VER NO GOOGLE MAPS <ChevronRight
                className="w-4 h-4 transition-transform group-hover:translate-x-1"
              />
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Schema Injection -->
    <script type="application/ld+json" set:html={JSON.stringify(schema)} />
    <script type="application/ld+json" set:html={JSON.stringify(faqSchema)} />
  </main>

  <WhatsAppFloatingButton client:idle />
  <Footer />
</Layout>
