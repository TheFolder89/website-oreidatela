---
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import WhatsAppFloatingButton from '../../components/WhatsAppFloatingButton';
import services from '../../data/services.json';
import { Check, Clock, Shield } from 'lucide-react';

export function getStaticPaths() {
  return services.map(service => ({
    params: { slug: service.slug },
    props: { service },
  }));
}

const { service } = Astro.props;

// JSON-LD Schema
const schema = {
  "@context": "https://schema.org",
  "@type": "Service",
  "name": service.name,
  "provider": {
    "@type": "LocalBusiness",
    "name": "O Rei da Tela"
  },
  "areaServed": {
    "@type": "City",
    "name": "Salvador"
  },
  "description": service.description,
  "offers": service.subServices.map(s => ({
    "@type": "Offer",
    "itemOffered": {
      "@type": "Service",
      "name": s.name
    },
    "priceCurrency": "BRL",
    "price": s.price.replace(/[^0-9,]/g, '').replace(',', '.'), // Basic cleanup
    "priceSpecification": {
       "@type": "PriceSpecification",
       "price": s.price.replace(/[^0-9,]/g, '').replace(',', '.'),
       "priceCurrency": "BRL"
    }
  }))
};
---

<Layout title={`${service.name} em Salvador | O Rei da Tela`} description={`Especialistas em ${service.name} em Salvador. ${service.description} Atendemos em domicílio.`}>
  <Header />

  <main>
    <!-- Header Service -->
    <section class="bg-brand-dark text-white py-24 relative overflow-hidden">
      <div class="absolute inset-0 bg-gradient-to-r from-brand-blue/20 to-transparent"></div>
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
        <h1 class="text-4xl md:text-6xl font-black mb-6 tracking-tight">{service.name}</h1>
        <p class="text-xl text-blue-100 max-w-2xl mx-auto font-light">{service.description}</p>
      </div>
    </section>

    <!-- Pricing Table -->
    <section class="py-20 bg-gray-50">
      <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden">
          <div class="p-8 bg-white border-b border-gray-100 flex justify-between items-end">
            <div>
              <h2 class="text-2xl font-bold text-gray-900">Tabela de Preços</h2>
              <p class="text-sm text-gray-500 mt-1">Valores transparentes e parcelamento facilitado.</p>
            </div>
            <div class="hidden md:block text-right">
                <span class="inline-block px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold uppercase tracking-wider">Tabela Atualizada 2025</span>
            </div>
          </div>
          <div class="divide-y divide-gray-50">
            {service.subServices.map((sub) => (
              <div class="p-8 flex flex-col md:flex-row md:items-center justify-between gap-6 hover:bg-blue-50/50 transition-colors group">
                <div>
                  <h3 class="font-bold text-xl text-gray-900 group-hover:text-brand-blue transition-colors">{sub.name}</h3>
                  <div class="flex items-center gap-3 text-sm text-gray-500 mt-2">
                    <span class="flex items-center gap-1"><Clock className="w-4 h-4" /> {sub.duration}</span>
                    <span class="w-1 h-1 bg-gray-300 rounded-full"></span>
                    <span>Peça Original ou Premium</span>
                  </div>
                </div>
                <div class="text-right">
                  <div class="text-3xl font-black text-brand-blue tracking-tight">{sub.price}</div>
                  <div class="text-xs text-gray-400 font-medium uppercase tracking-wide">em até 12x no cartão</div>
                </div>
              </div>
            ))}
          </div>
        </div>

        <!-- Benefits -->
        <div class="grid md:grid-cols-3 gap-6 mt-12">
           <div class="flex items-start gap-4 p-4 rounded-xl bg-gray-50">
              <div class="bg-green-100 p-2 rounded-lg">
                <Shield className="w-6 h-6 text-green-600" />
              </div>
              <div>
                <h4 class="font-bold text-gray-900">Garantia de 6 Meses</h4>
                <p class="text-sm text-gray-600">Cobrimos qualquer defeito de peça ou mão de obra.</p>
              </div>
           </div>
           <div class="flex items-start gap-4 p-4 rounded-xl bg-gray-50">
              <div class="bg-blue-100 p-2 rounded-lg">
                <Check className="w-6 h-6 text-blue-600" />
              </div>
              <div>
                <h4 class="font-bold text-gray-900">Peças Premium</h4>
                <p class="text-sm text-gray-600">Qualidade original para manter cores e sensibilidade.</p>
              </div>
           </div>
           <div class="flex items-start gap-4 p-4 rounded-xl bg-gray-50">
              <div class="bg-purple-100 p-2 rounded-lg">
                <Clock className="w-6 h-6 text-purple-600" />
              </div>
              <div>
                <h4 class="font-bold text-gray-900">Reparo Rápido</h4>
                <p class="text-sm text-gray-600">A maioria dos serviços é feito na hora em nossa loja.</p>
              </div>
           </div>
        </div>
      </div>
    </section>

    <!-- FAQ Section -->
    <section class="py-20 bg-gray-50">
       <div class="max-w-3xl mx-auto px-4">
          <h2 class="text-3xl font-bold text-center mb-12 text-gray-900">Perguntas Frequentes</h2>
          
          <div class="space-y-4">
            <details class="group bg-white rounded-xl shadow-sm border border-gray-200">
              <summary class="flex justify-between items-center font-medium cursor-pointer list-none p-6 text-lg text-gray-800">
                <span>Perco meus dados durante o conserto?</span>
                <span class="transition group-open:rotate-180">
                  <svg fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24"><path d="M6 9l6 6 6-6"></path></svg>
                </span>
              </summary>
              <div class="text-gray-600 px-6 pb-6">
                Não! Na troca de tela, bateria ou vidro, seus dados permanecem intactos. Apenas em casos de reparo avançado de placa ou software pode haver risco, mas avisamos antes e fazemos backup se possível.
              </div>
            </details>

            <details class="group bg-white rounded-xl shadow-sm border border-gray-200">
              <summary class="flex justify-between items-center font-medium cursor-pointer list-none p-6 text-lg text-gray-800">
                <span>A peça é original?</span>
                <span class="transition group-open:rotate-180">
                  <svg fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24"><path d="M6 9l6 6 6-6"></path></svg>
                </span>
              </summary>
              <div class="text-gray-600 px-6 pb-6">
                Trabalhamos com peças de Qualidade Original (OEM) e também opcionais Premium. Todas possuem garantia e mantêm as funcionalidades como True Tone (em modelos compatíveis).
              </div>
            </details>

            <details class="group bg-white rounded-xl shadow-sm border border-gray-200">
              <summary class="flex justify-between items-center font-medium cursor-pointer list-none p-6 text-lg text-gray-800">
                <span>Vocês buscam o aparelho?</span>
                <span class="transition group-open:rotate-180">
                  <svg fill="none" height="24" shape-rendering="geometricPrecision" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" viewBox="0 0 24 24" width="24"><path d="M6 9l6 6 6-6"></path></svg>
                </span>
              </summary>
              <div class="text-gray-600 px-6 pb-6">
                Sim! Temos serviço de delivery seguro para diversos bairros de Salvador. O motoboy busca, traz para o laboratório e devolvemos pronto.
              </div>
            </details>
          </div>
       </div>
    </section>

    <!-- Schema Injection -->
    <script type="application/ld+json" set:html={JSON.stringify(schema)} />
  </main>

  <WhatsAppFloatingButton client:idle />
  <Footer />
</Layout>
